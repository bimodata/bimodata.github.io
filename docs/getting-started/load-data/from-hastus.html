<!doctype html>
<html lang="fr" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-getting-started/load-data/from-hastus" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Charger des données depuis HASTUS | Bimo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://bimodata.github.io/img/bimo-social-card-fr.jpg"><meta data-rh="true" name="twitter:image" content="https://bimodata.github.io/img/bimo-social-card-fr.jpg"><meta data-rh="true" property="og:url" content="https://bimodata.github.io/docs/getting-started/load-data/from-hastus"><meta data-rh="true" property="og:locale" content="fr"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Charger des données depuis HASTUS | Bimo"><meta data-rh="true" name="description" content="Le package @bimo/core-utils-control-file-and-csv-data-parser permet de:"><meta data-rh="true" property="og:description" content="Le package @bimo/core-utils-control-file-and-csv-data-parser permet de:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bimodata.github.io/docs/getting-started/load-data/from-hastus"><link data-rh="true" rel="alternate" href="https://bimodata.github.io/docs/getting-started/load-data/from-hastus" hreflang="fr"><link data-rh="true" rel="alternate" href="https://bimodata.github.io/en/docs/getting-started/load-data/from-hastus" hreflang="en"><link data-rh="true" rel="alternate" href="https://bimodata.github.io/docs/getting-started/load-data/from-hastus" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Bimo RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Bimo Atom Feed">



<link rel="alternate" type="application/rss+xml" href="/examples/rss.xml" title="Bimo RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/examples/atom.xml" title="Bimo Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c54dd6f3.css">
<script src="/assets/js/runtime~main.dd8e7957.js" defer="defer"></script>
<script src="/assets/js/main.16441cf2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/bimo-dark-blue.png" alt="Logo Bimo" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/bimo-light-blue.png" alt="Logo Bimo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">Bimo</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/examples">Exemples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/getting-started/load-data/from-hastus"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_kvP7"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Français</a><ul class="dropdown__menu"><li><a href="/docs/getting-started/load-data/from-hastus" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="fr">Français</a></li><li><a href="/en/docs/getting-started/load-data/from-hastus" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li></ul></div><a href="mailto:gael.hameon@gmail.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/bimodata/bimo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-label="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Retour au début de la page" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/premiers-pas">Premiers pas</a><button aria-label="Réduire la catégorie &#x27;Premiers pas&#x27; de la barre latérale" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/getting-started/load-data">Charger des données</a><button aria-label="Réduire la catégorie &#x27;Charger des données&#x27; de la barre latérale" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/load-data/from-hastus">Charger des données depuis HASTUS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/load-data/from-json">Charger des données JSON</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/transform-data">Transformer des données</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/export-data">Exporter des données</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Fil d&#x27;Ariane"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Page d&#x27;accueil" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/premiers-pas"><span itemprop="name">Premiers pas</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/getting-started/load-data"><span itemprop="name">Charger des données</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Charger des données depuis HASTUS</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">Sur cette page</button></div><div class="theme-doc-markdown markdown"><h1>Charger des données depuis HASTUS</h1>
<p>Le package <a href="https://github.com/bimodata/bimo/tree/main/public/core/utils/control-file-and-csv-data-parser" target="_blank" rel="noopener noreferrer"><code>@bimo/core-utils-control-file-and-csv-data-parser</code></a> permet de:</p>
<ul>
<li>analyser un fichier de contrôle (par exemple, un fichier .oir HASTUS) qui décrit un format de données</li>
<li>analyser un fichier de données en interprétant son contenu à la lumière des informations préalablement obtenues en analysant le fichier de contrôle</li>
<li>renvoyer les données sous forme d&#x27;objets JavaScript structurés</li>
</ul>
<p>Plusieurs packages ont été créés pour enrober ce package et en simplifier l&#x27;utilisation en fonction des cas d&#x27;usage.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="généralités">Généralités<a class="hash-link" aria-label="Lien direct vers Généralités" title="Lien direct vers Généralités" href="/docs/getting-started/load-data/from-hastus#généralités">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="types-dentités-chargeables">Types d&#x27;entités &quot;chargeables&quot;<a class="hash-link" aria-label="Lien direct vers Types d&#x27;entités &quot;chargeables&quot;" title="Lien direct vers Types d&#x27;entités &quot;chargeables&quot;" href="/docs/getting-started/load-data/from-hastus#types-dentités-chargeables">​</a></h3>
<p>Comme vous le verrez dans les exemples, pour toutes les méthodes, il faut passer en argument le constructeur du type d&#x27;entité que l&#x27;on souhaite charger. À ce jour, les types d&#x27;entités &quot;chargeables&quot; sont:</p>
<ul>
<li><code>PlacesCollection</code></li>
<li><code>VehicleSchedulesCollection</code></li>
<li><code>RouteVersionsCollection</code></li>
<li><code>RunTimeVersionsCollection</code></li>
<li><code>BookingsCollection</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="compatibilité-avec-votre-version-hastus">Compatibilité avec votre version HASTUS<a class="hash-link" aria-label="Lien direct vers Compatibilité avec votre version HASTUS" title="Lien direct vers Compatibilité avec votre version HASTUS" href="/docs/getting-started/load-data/from-hastus#compatibilité-avec-votre-version-hastus">​</a></h3>
<p>Bimo a pour le moment été utilisé uniquement avec HASTUS 2019 et 2020 (et un tout petit peu 2014). Les entités Bimo sont construites sur la base des objets HASTUS disponibles dans ces versions. Les principaux objets HASTUS n&#x27;évoluent pas énormément - vous ne devriez donc pas avoir de problème à utiliser Bimo avec d&#x27;autres versions d&#x27;HASTUS (mais n&#x27;hésitez pas à nous contacter en cas de problème).</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="compatibilité-avec-vos-attributs-spécifiques">Compatibilité avec vos attributs spécifiques<a class="hash-link" aria-label="Lien direct vers Compatibilité avec vos attributs spécifiques" title="Lien direct vers Compatibilité avec vos attributs spécifiques" href="/docs/getting-started/load-data/from-hastus#compatibilité-avec-vos-attributs-spécifiques">​</a></h3>
<p>Si vous avez ajouté des attributs spécifiques sur des objets dans votre version d&#x27;HASTUS, vous avez probablement envie de pouvoir manipuler ces attributs dans Bimo !</p>
<p>Il y a deux méthodes pour y arriver:</p>
<ul>
<li>La méthode compliquée: créer vos propres entités dans Bimo en étendant les entités Bimo de base<!-- -->
<ul>
<li>Cette méthode n&#x27;est pas documentée pour le moment</li>
</ul>
</li>
<li>La méthode simple: utiliser &quot;_rawOirProps&quot;</li>
</ul>
<p>Quand vous chargez les entités à partir d&#x27;un fichier de données et d&#x27;un fichier de contrôle extraits d&#x27;HASTUS, les valeurs brutes de tous les attributs décrits dans les fichiers sont stockées dans l&#x27;attributs <code>_rawOirProps</code> sur chaque entité chargée. Ces valeurs seront également réexportées vers des fichiers à la fin de votre traitement si le fichier de contrôle utilisé pour l&#x27;export décrit un attribut ayant le même nom.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="charger-des-données-disponibles-dans-un-répertoire-local">Charger des données disponibles dans un répertoire local<a class="hash-link" aria-label="Lien direct vers Charger des données disponibles dans un répertoire local" title="Lien direct vers Charger des données disponibles dans un répertoire local" href="/docs/getting-started/load-data/from-hastus#charger-des-données-disponibles-dans-un-répertoire-local">​</a></h2>
<p>Si vous écrivez simplement un script qui tournera en Node.js sur une machine et qui chargera les données depuis son système de fichier, utilisez <a href="https://github.com/bimodata/bimo/tree/main/public/core/utils/get-entity-from-oir-data-at-path" target="_blank" rel="noopener noreferrer"><code>@bimo/core-utils-get-entity-from-oir-data-at-path</code></a>. Ce package lit les fichiers du dossier que vous lui passez en paramètre, se base sur les extensions pour distinguer le fichier de contrôle et les fichiers de données, et charge les données dans des entités Bimo.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="exemple">Exemple<a class="hash-link" aria-label="Lien direct vers Exemple" title="Lien direct vers Exemple" href="/docs/getting-started/load-data/from-hastus#exemple">​</a></h3>
<ol>
<li>Exportez des horaires de véhicules depuis HASTUS en utilisant l&#x27;<code>oig</code> standard <code>hastus_vehicle_schedule.id</code></li>
<li>Récupérez le fichier <code>oir</code> standard <code>hastus_vehicle_schedule.oir</code></li>
<li>Déposez le fichier <code>oir</code> et les fichiers de données dans un même dossier et notez le chemin complet de ce dossier.</li>
<li>Vous pouvez maintenant charger ces données avec le script ci-dessous</li>
</ol>
<div class="language-javascript codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_x_ju">script.js</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-javascript codeBlock_RMoD thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> getEntityFromOirDataAtPath </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@bimo/core-utils-get-entity-from-oir-data-at-path&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token maybe-class-name">VehicleSchedulesCollection</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@bimo/core-entities&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> pathToFolder </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token template-string string" style="color:rgb(206, 145, 120)">C:\path\to\folder</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> myVehicleSchedulesCollection </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">getEntityFromOirDataAtPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">pathToFolder</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">VehicleSchedulesCollection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// You can now do whatever you want with myVehicleSchedulesCollection ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">myVehicleSchedulesCollection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">longLoggingOutput</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="options">Options<a class="hash-link" aria-label="Lien direct vers Options" title="Lien direct vers Options" href="/docs/getting-started/load-data/from-hastus#options">​</a></h3>
<p>N&#x27;hésitez pas à consulter le <a href="https://github.com/bimodata/bimo/tree/main/public/core/utils/get-entity-from-oir-data-at-path" target="_blank" rel="noopener noreferrer">readme</a> du package et ses tests unitaires pour un vision complète des options disponibles.</p>
<p>Sachez toutefois qu&#x27;il est possible de spécifier si on souhaite lire plusieurs fichiers de données, auquel cas la fonction renverra un tableau contenant une entité par fichier, ou un seul, auquel cas la fonction lira le premier qu&#x27;elle trouve et renverra directement l&#x27;entité concernée.</p>
<p>Il est également possible de personnaliser les extensions (ou même les noms) de fichiers qui sont interprétés comme fichier de contrôle ou fichiers de données.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="charger-des-données-dans-une-architecture-plus-complexe">Charger des données dans une architecture plus complexe<a class="hash-link" aria-label="Lien direct vers Charger des données dans une architecture plus complexe" title="Lien direct vers Charger des données dans une architecture plus complexe" href="/docs/getting-started/load-data/from-hastus#charger-des-données-dans-une-architecture-plus-complexe">​</a></h2>
<p>Dans une application plus complexe où vous ne pouvez pas simplement lire les fichiers dans un répertoire, vous pouvez utiliser le package <a href="https://github.com/bimodata/bimo/tree/main/public/core/services/get-entity-from-oir-data-string-and-control-file" target="_blank" rel="noopener noreferrer"><code>@bimo/core-services-get-entity-from-oir-data-string-and-control-file</code></a>.</p>
<p>Son fonctionnement est très similaire à celui de <a href="https://github.com/bimodata/bimo/tree/main/public/core/utils/get-entity-from-oir-data-at-path" target="_blank" rel="noopener noreferrer"><code>@bimo/core-utils-get-entity-from-oir-data-at-path</code></a> mais cette fois, plutôt que de passer le chemin vers un répertoire, on passe directement le contenu du fichier de données et du fichier de contrôle sous forme de <code>string</code>. À vous de voir comment obtenir ces strings.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="exemple-1">Exemple<a class="hash-link" aria-label="Lien direct vers Exemple" title="Lien direct vers Exemple" href="/docs/getting-started/load-data/from-hastus#exemple-1">​</a></h3>
<div class="language-javascript codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_x_ju">someLambdaFunction.js</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-javascript codeBlock_RMoD thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> fetch </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;isomorphic-unfetch&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> getEntityFromOirDataStringAndControlFile </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@bimo/core-services-get-entity-from-oir-data-string-and-control-file&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token maybe-class-name">VehicleSchedulesCollection</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@bimo/core-entities&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">let</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;https://some.api.that.will.return.data/&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(220, 220, 170)">handler</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">fetch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> oirDataString</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> oirControlFileString </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">json</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> myVehicleSchedulesCollection </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">getEntityFromOirDataStringAndControlFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">oirDataString</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> oirControlFileString</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token literal-property property">EntityConstructor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token maybe-class-name">VehicleSchedulesCollection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// Do whatever you want with the vehicle schedules collection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// For example count the total number of trips</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> totalCountOftrips </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> myVehicleSchedulesCollection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">tripsCollectionOfAllTripsOfAllVscs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> totalCountOftrips</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/bimodata/bimo/tree/develop/docs-website/docs/getting-started/load-data/from-hastus.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Éditer cette page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pages de documentation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started/load-data"><div class="pagination-nav__sublabel">Précédent</div><div class="pagination-nav__label">Charger des données</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/getting-started/load-data/from-json"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">Charger des données JSON</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#généralités">Généralités</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#types-dentités-chargeables">Types d&#39;entités &quot;chargeables&quot;</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#compatibilité-avec-votre-version-hastus">Compatibilité avec votre version HASTUS</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#compatibilité-avec-vos-attributs-spécifiques">Compatibilité avec vos attributs spécifiques</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#charger-des-données-disponibles-dans-un-répertoire-local">Charger des données disponibles dans un répertoire local</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#exemple">Exemple</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#options">Options</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#charger-des-données-dans-une-architecture-plus-complexe">Charger des données dans une architecture plus complexe</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/getting-started/load-data/from-hastus#exemple-1">Exemple</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/blog">Blog</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/examples">Exemples</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/docs/intro">Documentation</a><span class="footer__link-separator">·</span><a href="https://github.com/bimodata/bimo" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Gaël Haméon</div></div></div></footer></div>
</body>
</html>